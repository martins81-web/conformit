{"remainingRequest":"D:\\test conformit\\conformit\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\test conformit\\conformit\\src\\components\\Commentaires.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\test conformit\\conformit\\src\\components\\Commentaires.vue","mtime":1625081519154},{"path":"D:\\test conformit\\conformit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1625016956083},{"path":"D:\\test conformit\\conformit\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1625016956224},{"path":"D:\\test conformit\\conformit\\node_modules\\babel-loader\\lib\\index.js","mtime":1625016955954},{"path":"D:\\test conformit\\conformit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1625016956083},{"path":"D:\\test conformit\\conformit\\node_modules\\vue-loader\\lib\\index.js","mtime":1625016973688}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgogIGltcG9ydCB7R2V0RXZlbnRDb21tZW50c30gZnJvbSAnLi4vZGF0YSc7CiAgaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnCgogIGV4cG9ydCBkZWZhdWx0ICB7CiAgICBuYW1lOiAnY29tbWVudGFpcmVzJywKICAgIHByb3BzOiBbJ3NlbGVjdGVkJ10sCiAgICBkYXRhICgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBldmVudENvbW1lbnRzOiBudWxsLAogICAgICAgIGFkZENvbW1lbnQ6IGZhbHNlLAogICAgICAgIGVkaXRDb21tZW50OiBmYWxzZSwKICAgICAgICBuZXdDb21tZW50OiB7CiAgICAgICAgICBjcmVhdGlvbkRhdGU6IG5ldyBEYXRlKCksCiAgICAgICAgICBhdXRob3I6ICIiLAogICAgICAgICAgY29udGVudDogIiIKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZm9ybWF0X2RhdGUodmFsdWUpewogICAgICAgICAgbW9tZW50LmxvY2FsZSgnZnInKTsKICAgICAgICBsZXQgZGF0ZSA9IG1vbWVudCh2YWx1ZSk7CiAgICAgICAgIGlmIChkYXRlKSB7CiAgICAgICAgICAgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoJ0RvIE1NTU0gWVlZWScpCiAgICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlbGV0ZUNvbW1lbnQoY29tbWVudCl7CiAgICAgICAgbGV0IGluZGV4PXRoaXMuZXZlbnRDb21tZW50cy5pbmRleE9mKGNvbW1lbnQpOwogICAgICAgIHRoaXMuZXZlbnRDb21tZW50cy5zcGxpY2UoaW5kZXgsMSk7CiAgICAgIH0sCiAgICAgIGFkZENvbW0oY29tbWVudCl7CiAgICAgICAgdGhpcy5ldmVudENvbW1lbnRzLnB1c2goY29tbWVudCk7CiAgICAgICAgdGhpcy5hZGRDb21tZW50PWZhbHNlOwogICAgICAgIHRoaXMubmV3Q29tbWVudD0gewogICAgICAgICAgY3JlYXRpb25EYXRlOiBuZXcgRGF0ZSgpLAogICAgICAgICAgYXV0aG9yOiAiIiwKICAgICAgICAgIGNvbnRlbnQ6ICIiCiAgICAgICAgfQogICAgICB9LAogICAgICAgIHNhdmVDb21tZW50KCl7CiAgICAgICAgICB0aGlzLmVkaXRDb21tZW50PWZhbHNlOwogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewoKICAgIH0sIAogICAgd2F0Y2g6IHsgCiAgICAgIHNlbGVjdGVkOiBmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCkgeyAvLyB3YXRjaCBpdAogICAgICAgIGNvbnNvbGUubG9nKCdQcm9wIGNoYW5nZWQ6ICcsIG5ld1ZhbCwgJyB8IHdhczogJywgb2xkVmFsKTsKICAgICAgICB0aGlzLmV2ZW50Q29tbWVudHM9R2V0RXZlbnRDb21tZW50cyhuZXdWYWwuaWQpOwogICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuZXZlbnRDb21tZW50cz1HZXRFdmVudENvbW1lbnRzKHRoaXMuc2VsZWN0ZWQuaWQpOwogICAgICB9KQogIH0KfQoKCg=="},{"version":3,"sources":["Commentaires.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Commentaires.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\n\n  <section class=\"commentaires\">\n    <span><b>Commentaires</b></span>\n    <div class='commentBox bg-light'>\n      <!-- New Comment -->\n      <div>\n        <b-button block variant=\"success\" v-on:click=\"addComment=true\" >Nouveau commentaire</b-button>\n      </div>\n      <div v-if=\"addComment\">\n          <b-card no-body class='px-3 py-1 my-2 '>\n\n          <span class='headerIcons'>\n              <button class=\"btn p-0\" v-on:click=\"addComm(newComment)\">\n                <b-icon icon=\"check-square-fill\" scale=\"1\" variant=\"success\"></b-icon>\n              </button>\n              <button class=\"btn p-0\" v-on:click=\"addComment=false\">\n                <b-icon icon=\"x-square-fill\" scale=\"1\" variant=\"danger\"></b-icon>\n              </button>\n          </span>\n\n          <div class='avatar my-3'>\n            <b-avatar></b-avatar>\n            <div class='item'>\n              <div>\n                <b-form-input v-model=\"newComment.author\" placeholder='Auteur'></b-form-input>\n              </div>\n              <div class='mt-1'>\n                <b-form-textarea\n                  placeholder='Commentaire'\n                  v-model=\"newComment.content\"\n                  rows=\"3\"\n                ></b-form-textarea>\n              </div>\n            </div>\n          </div>\n          \n        </b-card>\n      </div>\n      \n      <div v-for=\"(comment, i) in eventComments\" :key=\"i\" >\n        <!-- Delete/Edit Comment -->\n        <div v-if=\"editComment!==comment\">\n          <b-card no-body class='px-3 py-2 my-2'>\n            <span class='headerIcons'>\n              <button class=\"btn p-0\" v-on:click=\"deleteComment(comment)\">\n                <b-icon icon=\"trash-fill\" scale=\"1\" variant=\"danger\"></b-icon>\n              </button>\n              <button class=\"btn p-0\" v-on:click=\"editComment=comment\" >\n                <b-icon icon=\"pencil\" scale=\"1\" variant=\"success\"></b-icon>\n              </button>\n            </span>\n\n            <div class='avatar my-2'>\n              <b-avatar></b-avatar>\n              <div class='item'>\n                <span class=\"text-muted font-weight-bold\">{{comment.author}}</span>\n                <br>\n                {{comment.content}}\n              </div>\n            </div>\n            <span class='footerDate'>{{format_date(comment.creationDate)}}</span>\n          </b-card>\n        </div>\n        <!-- Edit Comment -->\n        <div v-else>\n          <b-card no-body class='px-3 py-1 my-2 '>\n            <span class='headerIcons'>\n              <button class=\"btn p-0\" v-on:click=\"saveComment()\">\n                <b-icon icon=\"check-square-fill\" scale=\"1\" variant=\"success\"></b-icon>\n              </button>\n              <button class=\"btn p-0\" v-on:click=\"editComment=false\">\n                <b-icon icon=\"x-square-fill\" scale=\"1\" variant=\"danger\"></b-icon>\n              </button>\n            </span>\n\n            <div class='avatar my-3'>\n              <b-avatar></b-avatar>\n              <div class='item'>\n                <div>\n                  <b-form-input v-model=\"comment.author\" placeholder='Auteur'></b-form-input>\n                </div>\n                <div class='mt-1'>\n                  <b-form-textarea\n                    placeholder='Commentaire'\n                    v-model=\"comment.content\"\n                    rows=\"3\"\n                  ></b-form-textarea>\n                </div>\n              </div>\n            </div>\n            <span class='footerDate'>{{format_date(comment.creationDate)}}</span>\n\n          </b-card>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script lang=\"js\">\n  import {GetEventComments} from '../data';\n  import moment from 'moment'\n\n  export default  {\n    name: 'commentaires',\n    props: ['selected'],\n    data () {\n      return {\n        eventComments: null,\n        addComment: false,\n        editComment: false,\n        newComment: {\n          creationDate: new Date(),\n          author: \"\",\n          content: \"\"\n        }\n      }\n    },\n    methods: {\n        format_date(value){\n          moment.locale('fr');\n        let date = moment(value);\n         if (date) {\n           return moment(date).format('Do MMMM YYYY')\n          }\n      },\n      deleteComment(comment){\n        let index=this.eventComments.indexOf(comment);\n        this.eventComments.splice(index,1);\n      },\n      addComm(comment){\n        this.eventComments.push(comment);\n        this.addComment=false;\n        this.newComment= {\n          creationDate: new Date(),\n          author: \"\",\n          content: \"\"\n        }\n      },\n        saveComment(){\n          this.editComment=false;\n        }\n    },\n    computed: {\n\n    }, \n    watch: { \n      selected: function(newVal, oldVal) { // watch it\n        console.log('Prop changed: ', newVal, ' | was: ', oldVal);\n        this.eventComments=GetEventComments(newVal.id);\n      }\n    },\n    mounted() {\n      this.$nextTick(function () {\n        this.eventComments=GetEventComments(this.selected.id);\n      })\n  }\n}\n\n\n</script>\n\n<style scoped lang=\"scss\">\n  .commentaires {\n    text-align: left;\n    \n }\n  .avatar{\n    display: flex;\n    align-items: center;\n  }\n  .item{\n    margin-left: 15px;\n    flex-grow: 1\n  }\n  .footerDate{\n    display: flex;\n    flex-direction: row-reverse\n  }\n  .headerIcons{\n    display: flex;\n    flex-direction: row-reverse\n  }\n  .commentBox{\n    padding: 25px;\n    overflow-y: scroll;\n\n  }\n\n   \n</style>\n"]}]}