{"remainingRequest":"D:\\test conformit\\conformit\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\test conformit\\conformit\\src\\components\\Commentaires.vue?vue&type=style&index=0&id=01bc4029&scoped=true&lang=scss&","dependencies":[{"path":"D:\\test conformit\\conformit\\src\\components\\Commentaires.vue","mtime":1625081014625},{"path":"D:\\test conformit\\conformit\\node_modules\\css-loader\\dist\\cjs.js","mtime":1625016972760},{"path":"D:\\test conformit\\conformit\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1625016973688},{"path":"D:\\test conformit\\conformit\\node_modules\\postcss-loader\\src\\index.js","mtime":1619205184330},{"path":"D:\\test conformit\\conformit\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1625008985620},{"path":"D:\\test conformit\\conformit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1625016956083},{"path":"D:\\test conformit\\conformit\\node_modules\\vue-loader\\lib\\index.js","mtime":1625016973688}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgogLmNvbW1lbnRhaXJlcyB7CiAgIHRleHQtYWxpZ246IGxlZnQ7CiAgIAp9CiAuYXZhdGFyewogICBkaXNwbGF5OiBmbGV4OwogICBhbGlnbi1pdGVtczogY2VudGVyOwogfQogLml0ZW17CiAgIG1hcmdpbi1sZWZ0OiAxNXB4OwogICBmbGV4LWdyb3c6IDEKIH0KIC5mb290ZXJEYXRlewogICBkaXNwbGF5OiBmbGV4OwogICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2UKIH0KIC5oZWFkZXJJY29uc3sKICAgZGlzcGxheTogZmxleDsKICAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlCiB9CiAuY29tbWVudEJveHsKICAgcGFkZGluZzogMjVweDsKICAgb3ZlcmZsb3cteTogc2Nyb2xsOwoKIH0KCiAgCg=="},{"version":3,"sources":["Commentaires.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiKA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Commentaires.vue","sourceRoot":"src/components","sourcesContent":["import { GetEventComments } from '../data';\n<template lang=\"html\">\n\n  <section class=\"commentaires\">\n    <span><b>Commentaires</b></span>\n    <div class='commentBox bg-light'>\n      <!-- New Comment -->\n      <div>\n        <b-button block variant=\"success\" v-on:click=\"addComment=true\" >Nouveau commentaire</b-button>\n      </div>\n      <div v-if=\"addComment\">\n          <b-card no-body class='px-3 py-1 my-2 '>\n\n          <span class='headerIcons'>\n              <button class=\"btn p-0\" v-on:click=\"addComm(newComment)\">\n                <b-icon icon=\"check-square-fill\" scale=\"1\" variant=\"success\"></b-icon>\n              </button>\n              <button class=\"btn p-0\" v-on:click=\"addComment=false\">\n                <b-icon icon=\"x-square-fill\" scale=\"1\" variant=\"danger\"></b-icon>\n              </button>\n          </span>\n\n          <div class='avatar my-3'>\n            <b-avatar></b-avatar>\n            <div class='item'>\n              <div>\n                <b-form-input v-model=\"newComment.author\" placeholder='Auteur'></b-form-input>\n              </div>\n              <div class='mt-1'>\n                <b-form-textarea\n                  placeholder='Commentaire'\n                  v-model=\"newComment.content\"\n                  rows=\"3\"\n                ></b-form-textarea>\n              </div>\n            </div>\n          </div>\n          \n        </b-card>\n      </div>\n      \n      <div v-for=\"(comment, i) in eventComments\" :key=\"i\" >\n        <!-- Delete/Edit Comment -->\n        <div v-if=\"editComment!==comment\">\n          <b-card no-body class='px-3 py-2 my-2'>\n            <span class='headerIcons'>\n              <button class=\"btn p-0\" v-on:click=\"deleteComment(comment)\">\n                <b-icon icon=\"trash-fill\" scale=\"1\" variant=\"danger\"></b-icon>\n              </button>\n              <button class=\"btn p-0\" v-on:click=\"editComment=comment\" >\n                <b-icon icon=\"pencil\" scale=\"1\" variant=\"success\"></b-icon>\n              </button>\n            </span>\n\n            <div class='avatar my-2'>\n              <b-avatar></b-avatar>\n              <div class='item'>\n                <span class=\"text-muted font-weight-bold\">{{comment.author}}</span>\n                <br>\n                {{comment.content}}\n              </div>\n            </div>\n            <span class='footerDate'>{{format_date(comment.creationDate)}}</span>\n          </b-card>\n        </div>\n        <!-- Edit Comment -->\n        <div v-else>\n          <b-card no-body class='px-3 py-1 my-2 '>\n            <span class='headerIcons'>\n              <b-icon class='btn p-2 ml-2' icon=\"check-square-fill\" scale=\"1\" variant=\"success\" v-on:click=\"saveComment()\"></b-icon> \n              <b-icon class='btn p-2' icon=\"x-square-fill\" scale=\"1\" variant=\"danger\" v-on:click=\"editComment=false\"></b-icon> \n            </span>\n\n            <div class='avatar my-3'>\n              <b-avatar></b-avatar>\n              <div class='item'>\n                <div>\n                  <b-form-input v-model=\"comment.author\" placeholder='Auteur'></b-form-input>\n                </div>\n                <div class='mt-1'>\n                  <b-form-textarea\n                    placeholder='Commentaire'\n                    v-model=\"comment.content\"\n                    rows=\"3\"\n                  ></b-form-textarea>\n                </div>\n              </div>\n            </div>\n            <span class='footerDate'>{{format_date(comment.creationDate)}}</span>\n\n          </b-card>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script lang=\"js\">\n  import {GetEventComments} from '../data';\n  import moment from 'moment'\n\n  export default  {\n    name: 'commentaires',\n    props: ['selected'],\n    data () {\n      return {\n        eventComments: null,\n        addComment: false,\n        editComment: false,\n        newComment: {\n          creationDate: new Date(),\n          author: \"\",\n          content: \"\"\n        }\n      }\n    },\n    methods: {\n        format_date(value){\n          moment.locale('fr');\n        let date = moment(value);\n         if (date) {\n           return moment(date).format('Do MMMM YYYY')\n          }\n      },\n      deleteComment(comment){\n        let index=this.eventComments.indexOf(comment);\n        this.eventComments.splice(index,1);\n      },\n      addComm(comment){\n        this.eventComments.push(comment);\n        this.addComment=false;\n        this.newComment= {\n          creationDate: new Date(),\n          author: \"\",\n          content: \"\"\n        }\n      },\n        saveComment(){\n          this.editComment=false;\n        }\n    },\n    computed: {\n\n    }, \n    watch: { \n      selected: function(newVal, oldVal) { // watch it\n        console.log('Prop changed: ', newVal, ' | was: ', oldVal);\n        this.eventComments=GetEventComments(newVal.id);\n      }\n    },\n    mounted() {\n      this.$nextTick(function () {\n        this.eventComments=GetEventComments(this.selected.id);\n      })\n  }\n}\n\n\n</script>\n\n<style scoped lang=\"scss\">\n  .commentaires {\n    text-align: left;\n    \n }\n  .avatar{\n    display: flex;\n    align-items: center;\n  }\n  .item{\n    margin-left: 15px;\n    flex-grow: 1\n  }\n  .footerDate{\n    display: flex;\n    flex-direction: row-reverse\n  }\n  .headerIcons{\n    display: flex;\n    flex-direction: row-reverse\n  }\n  .commentBox{\n    padding: 25px;\n    overflow-y: scroll;\n\n  }\n\n   \n</style>\n"]}]}