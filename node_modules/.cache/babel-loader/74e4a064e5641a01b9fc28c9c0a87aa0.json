{"remainingRequest":"D:\\test conformit\\conformit\\node_modules\\babel-loader\\lib\\index.js!D:\\test conformit\\conformit\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\test conformit\\conformit\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\test conformit\\conformit\\src\\components\\Commentaires.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\test conformit\\conformit\\src\\components\\Commentaires.vue","mtime":1625081014625},{"path":"D:\\test conformit\\conformit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1625016956083},{"path":"D:\\test conformit\\conformit\\node_modules\\babel-loader\\lib\\index.js","mtime":1625016955954},{"path":"D:\\test conformit\\conformit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1625016956083},{"path":"D:\\test conformit\\conformit\\node_modules\\vue-loader\\lib\\index.js","mtime":1625016973688}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0IHsgR2V0RXZlbnRDb21tZW50cyB9IGZyb20gJy4uL2RhdGEnOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY29tbWVudGFpcmVzJywKICBwcm9wczogWydzZWxlY3RlZCddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBldmVudENvbW1lbnRzOiBudWxsLAogICAgICBhZGRDb21tZW50OiBmYWxzZSwKICAgICAgZWRpdENvbW1lbnQ6IGZhbHNlLAogICAgICBuZXdDb21tZW50OiB7CiAgICAgICAgY3JlYXRpb25EYXRlOiBuZXcgRGF0ZSgpLAogICAgICAgIGF1dGhvcjogIiIsCiAgICAgICAgY29udGVudDogIiIKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZvcm1hdF9kYXRlOiBmdW5jdGlvbiBmb3JtYXRfZGF0ZSh2YWx1ZSkgewogICAgICBtb21lbnQubG9jYWxlKCdmcicpOwogICAgICB2YXIgZGF0ZSA9IG1vbWVudCh2YWx1ZSk7CgogICAgICBpZiAoZGF0ZSkgewogICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCdEbyBNTU1NIFlZWVknKTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZUNvbW1lbnQ6IGZ1bmN0aW9uIGRlbGV0ZUNvbW1lbnQoY29tbWVudCkgewogICAgICB2YXIgaW5kZXggPSB0aGlzLmV2ZW50Q29tbWVudHMuaW5kZXhPZihjb21tZW50KTsKICAgICAgdGhpcy5ldmVudENvbW1lbnRzLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgYWRkQ29tbTogZnVuY3Rpb24gYWRkQ29tbShjb21tZW50KSB7CiAgICAgIHRoaXMuZXZlbnRDb21tZW50cy5wdXNoKGNvbW1lbnQpOwogICAgICB0aGlzLmFkZENvbW1lbnQgPSBmYWxzZTsKICAgICAgdGhpcy5uZXdDb21tZW50ID0gewogICAgICAgIGNyZWF0aW9uRGF0ZTogbmV3IERhdGUoKSwKICAgICAgICBhdXRob3I6ICIiLAogICAgICAgIGNvbnRlbnQ6ICIiCiAgICAgIH07CiAgICB9LAogICAgc2F2ZUNvbW1lbnQ6IGZ1bmN0aW9uIHNhdmVDb21tZW50KCkgewogICAgICB0aGlzLmVkaXRDb21tZW50ID0gZmFsc2U7CiAgICB9CiAgfSwKICBjb21wdXRlZDoge30sCiAgd2F0Y2g6IHsKICAgIHNlbGVjdGVkOiBmdW5jdGlvbiBzZWxlY3RlZChuZXdWYWwsIG9sZFZhbCkgewogICAgICAvLyB3YXRjaCBpdAogICAgICBjb25zb2xlLmxvZygnUHJvcCBjaGFuZ2VkOiAnLCBuZXdWYWwsICcgfCB3YXM6ICcsIG9sZFZhbCk7CiAgICAgIHRoaXMuZXZlbnRDb21tZW50cyA9IEdldEV2ZW50Q29tbWVudHMobmV3VmFsLmlkKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuZXZlbnRDb21tZW50cyA9IEdldEV2ZW50Q29tbWVudHModGhpcy5zZWxlY3RlZC5pZCk7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["Commentaires.vue"],"names":[],"mappings":";AAkGA,SAAA,gBAAA,QAAA,SAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA,CAAA,UAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,aAAA,EAAA,IADA;AAEA,MAAA,UAAA,EAAA,KAFA;AAGA,MAAA,WAAA,EAAA,KAHA;AAIA,MAAA,UAAA,EAAA;AACA,QAAA,YAAA,EAAA,IAAA,IAAA,EADA;AAEA,QAAA,MAAA,EAAA,EAFA;AAGA,QAAA,OAAA,EAAA;AAHA;AAJA,KAAA;AAUA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,KADA,EACA;AACA,MAAA,MAAA,CAAA,MAAA,CAAA,IAAA;AACA,UAAA,IAAA,GAAA,MAAA,CAAA,KAAA,CAAA;;AACA,UAAA,IAAA,EAAA;AACA,eAAA,MAAA,CAAA,IAAA,CAAA,CAAA,MAAA,CAAA,cAAA,CAAA;AACA;AACA,KAPA;AAQA,IAAA,aARA,yBAQA,OARA,EAQA;AACA,UAAA,KAAA,GAAA,KAAA,aAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,WAAA,aAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,KAXA;AAYA,IAAA,OAZA,mBAYA,OAZA,EAYA;AACA,WAAA,aAAA,CAAA,IAAA,CAAA,OAAA;AACA,WAAA,UAAA,GAAA,KAAA;AACA,WAAA,UAAA,GAAA;AACA,QAAA,YAAA,EAAA,IAAA,IAAA,EADA;AAEA,QAAA,MAAA,EAAA,EAFA;AAGA,QAAA,OAAA,EAAA;AAHA,OAAA;AAKA,KApBA;AAqBA,IAAA,WArBA,yBAqBA;AACA,WAAA,WAAA,GAAA,KAAA;AACA;AAvBA,GAfA;AAwCA,EAAA,QAAA,EAAA,EAxCA;AA2CA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA,kBAAA,MAAA,EAAA,MAAA,EAAA;AAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,MAAA,EAAA,UAAA,EAAA,MAAA;AACA,WAAA,aAAA,GAAA,gBAAA,CAAA,MAAA,CAAA,EAAA,CAAA;AACA;AAJA,GA3CA;AAiDA,EAAA,OAjDA,qBAiDA;AACA,SAAA,SAAA,CAAA,YAAA;AACA,WAAA,aAAA,GAAA,gBAAA,CAAA,KAAA,QAAA,CAAA,EAAA,CAAA;AACA,KAFA;AAGA;AArDA,CAAA","sourcesContent":["import { GetEventComments } from '../data';\n<template lang=\"html\">\n\n  <section class=\"commentaires\">\n    <span><b>Commentaires</b></span>\n    <div class='commentBox bg-light'>\n      <!-- New Comment -->\n      <div>\n        <b-button block variant=\"success\" v-on:click=\"addComment=true\" >Nouveau commentaire</b-button>\n      </div>\n      <div v-if=\"addComment\">\n          <b-card no-body class='px-3 py-1 my-2 '>\n\n          <span class='headerIcons'>\n              <button class=\"btn p-0\" v-on:click=\"addComm(newComment)\">\n                <b-icon icon=\"check-square-fill\" scale=\"1\" variant=\"success\"></b-icon>\n              </button>\n              <button class=\"btn p-0\" v-on:click=\"addComment=false\">\n                <b-icon icon=\"x-square-fill\" scale=\"1\" variant=\"danger\"></b-icon>\n              </button>\n          </span>\n\n          <div class='avatar my-3'>\n            <b-avatar></b-avatar>\n            <div class='item'>\n              <div>\n                <b-form-input v-model=\"newComment.author\" placeholder='Auteur'></b-form-input>\n              </div>\n              <div class='mt-1'>\n                <b-form-textarea\n                  placeholder='Commentaire'\n                  v-model=\"newComment.content\"\n                  rows=\"3\"\n                ></b-form-textarea>\n              </div>\n            </div>\n          </div>\n          \n        </b-card>\n      </div>\n      \n      <div v-for=\"(comment, i) in eventComments\" :key=\"i\" >\n        <!-- Delete/Edit Comment -->\n        <div v-if=\"editComment!==comment\">\n          <b-card no-body class='px-3 py-2 my-2'>\n            <span class='headerIcons'>\n              <button class=\"btn p-0\" v-on:click=\"deleteComment(comment)\">\n                <b-icon icon=\"trash-fill\" scale=\"1\" variant=\"danger\"></b-icon>\n              </button>\n              <button class=\"btn p-0\" v-on:click=\"editComment=comment\" >\n                <b-icon icon=\"pencil\" scale=\"1\" variant=\"success\"></b-icon>\n              </button>\n            </span>\n\n            <div class='avatar my-2'>\n              <b-avatar></b-avatar>\n              <div class='item'>\n                <span class=\"text-muted font-weight-bold\">{{comment.author}}</span>\n                <br>\n                {{comment.content}}\n              </div>\n            </div>\n            <span class='footerDate'>{{format_date(comment.creationDate)}}</span>\n          </b-card>\n        </div>\n        <!-- Edit Comment -->\n        <div v-else>\n          <b-card no-body class='px-3 py-1 my-2 '>\n            <span class='headerIcons'>\n              <b-icon class='btn p-2 ml-2' icon=\"check-square-fill\" scale=\"1\" variant=\"success\" v-on:click=\"saveComment()\"></b-icon> \n              <b-icon class='btn p-2' icon=\"x-square-fill\" scale=\"1\" variant=\"danger\" v-on:click=\"editComment=false\"></b-icon> \n            </span>\n\n            <div class='avatar my-3'>\n              <b-avatar></b-avatar>\n              <div class='item'>\n                <div>\n                  <b-form-input v-model=\"comment.author\" placeholder='Auteur'></b-form-input>\n                </div>\n                <div class='mt-1'>\n                  <b-form-textarea\n                    placeholder='Commentaire'\n                    v-model=\"comment.content\"\n                    rows=\"3\"\n                  ></b-form-textarea>\n                </div>\n              </div>\n            </div>\n            <span class='footerDate'>{{format_date(comment.creationDate)}}</span>\n\n          </b-card>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script lang=\"js\">\n  import {GetEventComments} from '../data';\n  import moment from 'moment'\n\n  export default  {\n    name: 'commentaires',\n    props: ['selected'],\n    data () {\n      return {\n        eventComments: null,\n        addComment: false,\n        editComment: false,\n        newComment: {\n          creationDate: new Date(),\n          author: \"\",\n          content: \"\"\n        }\n      }\n    },\n    methods: {\n        format_date(value){\n          moment.locale('fr');\n        let date = moment(value);\n         if (date) {\n           return moment(date).format('Do MMMM YYYY')\n          }\n      },\n      deleteComment(comment){\n        let index=this.eventComments.indexOf(comment);\n        this.eventComments.splice(index,1);\n      },\n      addComm(comment){\n        this.eventComments.push(comment);\n        this.addComment=false;\n        this.newComment= {\n          creationDate: new Date(),\n          author: \"\",\n          content: \"\"\n        }\n      },\n        saveComment(){\n          this.editComment=false;\n        }\n    },\n    computed: {\n\n    }, \n    watch: { \n      selected: function(newVal, oldVal) { // watch it\n        console.log('Prop changed: ', newVal, ' | was: ', oldVal);\n        this.eventComments=GetEventComments(newVal.id);\n      }\n    },\n    mounted() {\n      this.$nextTick(function () {\n        this.eventComments=GetEventComments(this.selected.id);\n      })\n  }\n}\n\n\n</script>\n\n<style scoped lang=\"scss\">\n  .commentaires {\n    text-align: left;\n    \n }\n  .avatar{\n    display: flex;\n    align-items: center;\n  }\n  .item{\n    margin-left: 15px;\n    flex-grow: 1\n  }\n  .footerDate{\n    display: flex;\n    flex-direction: row-reverse\n  }\n  .headerIcons{\n    display: flex;\n    flex-direction: row-reverse\n  }\n  .commentBox{\n    padding: 25px;\n    overflow-y: scroll;\n\n  }\n\n   \n</style>\n"],"sourceRoot":"src/components"}]}